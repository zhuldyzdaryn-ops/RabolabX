<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Лаб. работа №9: Сила трения</title>
    <style>
        :root {
            --primary: #d35400;
            --secondary: #2c3e50;
            --bg: #fdfefe;
            --panel: #ffffff;
            --text: #34495e;
            --border: #bdc3c7;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: var(--bg);
            color: var(--text);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* HEADER */
        header {
            background-color: var(--secondary);
            color: white;
            padding: 15px 20px;
            flex-shrink: 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header-left {
            display: flex;
            flex-direction: column;
        }
        h1 { margin: 0; font-size: 1.3rem; }
        .theory-mini { font-size: 0.9rem; opacity: 0.9; margin-top: 5px;}

        .lang-switch {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.4);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
            white-space: nowrap;
            margin-left: 20px;
        }
        .lang-switch:hover { background: rgba(255,255,255,0.3); }

        /* LAYOUT */
        .main-container { display: flex; flex: 1; overflow: hidden; }

        /* SIDEBAR */
        .sidebar {
            width: 320px;
            background: var(--panel);
            border-right: 1px solid var(--border);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            z-index: 10;
        }

        .control-group { border-bottom: 1px solid #eee; padding-bottom: 15px; }
        h3 { margin: 0 0 10px 0; font-size: 1.1rem; color: var(--primary); }
        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem; }
        select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }

        .btn {
            width: 100%; padding: 12px; margin-top: 5px; border: none; border-radius: 4px;
            cursor: pointer; font-weight: bold; color: white; transition: 0.2s; font-size: 0.9rem;
        }
        .btn-pull { background: var(--primary); } .btn-pull:hover { background: #e67e22; }
        .btn-rec { background: #27ae60; } .btn-rec:hover { background: #2ecc71; }
        .btn-res { background: #7f8c8d; } .btn-res:hover { background: #95a5a6; }
        .btn:disabled { background: #bdc3c7; cursor: not-allowed; }

        .weights-viz {
            display: flex; justify-content: center; gap: 5px; margin: 10px 0;
            height: 30px; align-items: end;
        }
        .w-box { width: 25px; height: 15px; background: #7f8c8d; border: 1px solid #555; border-radius: 2px; }

        /* SIMULATION */
        .sim-area {
            flex: 1;
            position: relative;
            background: #ecf0f1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .surface-layer {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 200px;
            border-top: 3px solid #bdc3c7;
            transition: background 0.3s;
        }

        svg { width: 100%; height: 100%; position: absolute; top:0; left:0; pointer-events: none; }

        /* SVG Elements */
        .block { fill: #d35400; stroke: #a04000; stroke-width: 2; }
        .weight-svg { fill: #7f8c8d; stroke: #2c3e50; }
        
        /* Dynamometer Styles */
        .dyna-body { fill: #fdfefe; stroke: #2c3e50; stroke-width: 2; }
        .dyna-tick { stroke: #2c3e50; stroke-width: 2; }
        .dyna-tick-sm { stroke: #7f8c8d; stroke-width: 1; }
        .dyna-text { font-family: sans-serif; font-size: 14px; font-weight: bold; fill: #2c3e50; text-anchor: middle; }
        .dyna-spring { fill: none; stroke: #555; stroke-width: 3; stroke-linecap: round; }
        .dyna-pointer { fill: #e74c3c; stroke: #c0392b; stroke-width: 1; }
        
        .arrow { stroke-width: 2; marker-end: url(#arrowhead); }

        /* Info Overlay */
        .info-panel {
            position: absolute; top: 20px; right: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px; border-radius: 8px;
            border: 1px solid #ccc;
            font-family: monospace;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .info-row { display: flex; justify-content: space-between; gap: 20px; margin-bottom: 5px; }
        .val { font-weight: bold; color: var(--primary); }

        /* JOURNAL */
        .journal-panel {
            height: 200px; background: white; border-top: 3px solid var(--secondary);
            display: flex; flex-direction: column;
        }
        .j-header { padding: 10px 20px; background: #eee; font-weight: bold; display: flex; justify-content: space-between; align-items: center;}
        .table-wrap { flex: 1; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background: #f8f9fa; position: sticky; top: 0; }
        
    </style>
</head>
<body>

<header>
    <div class="header-left">
        <h1 id="main-title">Лаб. №9: Сила трения скольжения</h1>
        <div class="theory-mini">
            F<sub>тр</sub> = &mu; &middot; N = &mu; &middot; P
        </div>
    </div>
    <button class="lang-switch" onclick="toggleLang()">RU / KZ</button>
</header>

<div class="main-container">
    <aside class="sidebar">
        <div class="control-group">
            <h3 id="h3-surface">1. Поверхность</h3>
            <label id="lbl-material">Материал стола:</label>
            <select id="surface-select" onchange="resetSim()">
                <option id="opt-wood" value="wood">Дерево (по дереву)</option>
                <option id="opt-rubber" value="rubber">Резина (высокое трение)</option>
                <option id="opt-ice" value="ice">Стекло/Лед (низкое трение)</option>
            </select>
        </div>

        <div class="control-group">
            <h3 id="h3-load">2. Нагрузка</h3>
            <label id="lbl-weight-title">Вес бруска + грузов:</label>
            <div class="weights-viz" id="w-viz"></div>
            <div style="display:flex; gap:10px;">
                <button class="btn btn-res" id="btn-add" onclick="changeWeights(1)">+ Груз</button>
                <button class="btn btn-res" id="btn-rem" onclick="changeWeights(-1)">- Груз</button>
            </div>
            <div style="margin-top:10px; font-size:0.9rem; text-align:center;">
                <span id="lbl-total-p">Общий вес P =</span> <span id="lbl-weight" style="font-weight:bold">1.0</span> <span id="lbl-unit-p">Н</span>
            </div>
        </div>

        <div class="control-group">
            <h3 id="h3-exp">3. Эксперимент</h3>
            <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                <button class="btn btn-pull" id="btn-pull" onclick="togglePull()" style="margin-top: 0; padding: 10px 5px; font-size: 0.8rem; line-height: 1.2;">ТЯНУТЬ РАВНОМЕРНО ▶</button>
                <button class="btn btn-rec" id="btn-rec" onclick="recordData()" disabled style="margin-top: 0; padding: 10px 5px; font-size: 0.8rem; line-height: 1.2;">СНЯТЬ ПОКАЗАНИЯ</button>
            </div>
            <button class="btn btn-res" id="btn-reset" onclick="resetSim()" style="margin-top: 0;">СБРОС ↺</button>
        </div>
        
        <div style="font-size: 0.8rem; color:#666; margin-top: auto;">
            <strong id="lbl-hints-title">Указания:</strong><br>
            <span id="lbl-hints-text">Смотрите на красную стрелку на шкале. Запишите показания, когда брусок движется равномерно.</span>
        </div>
    </aside>

    <div class="sim-area">
        <div id="surface-bg" class="surface-layer" style="background: #e67e22;"></div>
        
        <div class="info-panel">
            <div class="info-row"><span id="lbl-info-f">Сила тяги (F):</span> <span class="val" id="val-force">0.00 Н</span></div>
            <div class="info-row"><span id="lbl-info-p">Вес (P):</span> <span class="val" id="val-p">1.00 Н</span></div>
            <div class="info-row" style="font-size:0.8em; color:#7f8c8d; border-top:1px solid #ddd; margin-top:5px; padding-top:5px;">
                <span id="lbl-info-state">Состояние:</span> <span id="state-text">Покой</span>
            </div>
        </div>

        <svg id="sim-svg" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet">
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <path d="M0,0 L10,3.5 L0,7 Z" fill="#2c3e50" />
                </marker>
                <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <path d="M0,0 L10,3.5 L0,7 Z" fill="#c0392b" />
                </marker>
            </defs>

            <g id="moving-group" transform="translate(50, 200)">
                
                <line x1="0" y1="25" x2="-60" y2="25" stroke="#c0392b" class="arrow" marker-end="url(#arrowhead-red)" id="arrow-fric" opacity="0"/>
                <text x="-60" y="20" fill="#c0392b" font-size="12" id="text-fric" opacity="0">Fтр</text>

                <rect x="0" y="0" width="100" height="50" class="block" />
                <text x="50" y="30" fill="white" font-size="12" text-anchor="middle" opacity="0.8" id="svg-block">Брусок</text>

                <g id="weights-group" transform="translate(10, -20)"></g>

                <g id="dyna-group" transform="translate(100, 10)">
                    
                    <line id="spring-line" x1="0" y1="15" x2="40" y2="15" class="dyna-spring" />
                    
                    <g id="dyna-body-group" transform="translate(40, -10)">
                        <rect x="0" y="0" width="220" height="50" rx="4" class="dyna-body" />
                        
                        <g id="scale-ticks" transform="translate(10, 30)"></g>
                        
                        <path id="pointer" d="M10,0 L15,10 L5,10 Z" fill="#e74c3c" transform="translate(0, 10)" />
                        
                        <line x1="220" y1="25" x2="280" y2="25" stroke="#2c3e50" class="arrow" />
                        <text x="230" y="20" fill="#2c3e50" font-size="12" id="svg-pull">Тяга</text>
                    </g>
                </g>
            </g>
        </svg>
    </div>
</div>

<footer class="journal-panel">
    <div class="j-header">
        <span id="journal-title">Журнал измерений</span>
        <button class="btn btn-res" id="btn-clear" style="width:auto; padding:5px 15px; margin:0; font-size: 0.8rem;" onclick="clearTable()">Очистить таблицу</button>
    </div>
    <div class="table-wrap">
        <table id="data-table">
            <thead>
                <tr>
                    <th id="th-1">Поверхность</th>
                    <th id="th-2">Кол-во грузов</th>
                    <th id="th-3">Вес P (Н)</th>
                    <th id="th-4">Сила трения Fтр (Н)</th>
                    <th id="th-5">Коэффициент &mu;</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</footer>

<script>
    // === ЛОКАЛИЗАЦИЯ (СЛОВАРЬ) ===
    const dict = {
        ru: {
            title: "Лаб. работа №9: Сила трения",
            h1: "Лаб. №9: Сила трения скольжения",
            h3Surface: "1. Поверхность",
            lblMaterial: "Материал стола:",
            optWood: "Дерево (по дереву)",
            optRubber: "Резина (высокое трение)",
            optIce: "Стекло/Лед (низкое трение)",
            h3Load: "2. Нагрузка",
            lblWeightTitle: "Вес бруска + грузов:",
            btnAdd: "+ Груз",
            btnRem: "- Груз",
            lblTotalP: "Общий вес P =",
            h3Exp: "3. Эксперимент",
            btnPull: "ТЯНУТЬ РАВНОМЕРНО ▶",
            btnStop: "СТОП ■",
            btnRec: "СНЯТЬ ПОКАЗАНИЯ",
            btnReset: "СБРОС ↺",
            lblHintsTitle: "Указания:",
            lblHintsText: "Смотрите на красную стрелку на шкале. Запишите показания, когда брусок движется равномерно.",
            lblInfoF: "Сила тяги (F):",
            lblInfoP: "Вес (P):",
            lblInfoState: "Состояние:",
            stateRest: "Покой",
            stateTension: "Натяжение...",
            stateSlide: "Скольжение",
            svgBlock: "Брусок",
            svgPull: "Тяга",
            svgFric: "Fтр",
            journalTitle: "Журнал измерений",
            btnClear: "Очистить таблицу",
            th1: "Поверхность",
            th2: "Кол-во грузов",
            th3: "Вес P (Н)",
            th4: "Сила трения Fтр (Н)",
            th5: "Коэффициент &mu;",
            unitN: "Н",
            surfNames: { wood: "Дерево", rubber: "Резина", ice: "Лед" }
        },
        kz: {
            title: "Зертхана №9: Үйкеліс күші",
            h1: "Зерт. №9: Сырғанау үйкеліс күші",
            h3Surface: "1. Бет",
            lblMaterial: "Үстел материалы:",
            optWood: "Ағаш (ағаш бетінде)",
            optRubber: "Резеңке (жоғары үйкеліс)",
            optIce: "Шыны/Мұз (төмен үйкеліс)",
            h3Load: "2. Жүктеме",
            lblWeightTitle: "Білеуше + жүктер салмағы:",
            btnAdd: "+ Жүк",
            btnRem: "- Жүк",
            lblTotalP: "Жалпы салмақ P =",
            h3Exp: "3. Тәжірибе",
            btnPull: "БІРҚАЛЫПТЫ ТАРТУ ▶",
            btnStop: "ТОҚТАТУ ■",
            btnRec: "КӨРСЕТКІШТЕРДІ АЛУ",
            btnReset: "ҚАЙТАЛАУ ↺",
            lblHintsTitle: "Нұсқаулар:",
            lblHintsText: "Шәкілдегі қызыл көрсеткіге қараңыз. Білеуше бірқалыпты қозғалған кездегі көрсеткіштерді жазыңыз.",
            lblInfoF: "Тарту күші (F):",
            lblInfoP: "Салмақ (P):",
            lblInfoState: "Күйі:",
            stateRest: "Тыныштық",
            stateTension: "Керілу...",
            stateSlide: "Сырғанау",
            svgBlock: "Білеуше",
            svgPull: "Тарту",
            svgFric: "Fүйк",
            journalTitle: "Өлшеу журналы",
            btnClear: "Кестені тазарту",
            th1: "Бет",
            th2: "Жүктер саны",
            th3: "Салмақ P (Н)",
            th4: "Үйкеліс күші Fүйк (Н)",
            th5: "Коэффициент &mu;",
            unitN: "Н",
            surfNames: { wood: "Ағаш", rubber: "Резеңке", ice: "Мұз" }
        }
    };

    let currentLang = 'ru';

    function toggleLang() {
        currentLang = currentLang === 'ru' ? 'kz' : 'ru';
        applyTranslations();
        updateDOM(); // Обновляем зависимые от языка тексты (например, статус и Н)
    }

    function applyTranslations() {
        const t = dict[currentLang];
        
        document.getElementById('page-title').innerText = t.title;
        document.getElementById('main-title').innerText = t.h1;
        
        document.getElementById('h3-surface').innerText = t.h3Surface;
        document.getElementById('lbl-material').innerText = t.lblMaterial;
        document.getElementById('opt-wood').innerText = t.optWood;
        document.getElementById('opt-rubber').innerText = t.optRubber;
        document.getElementById('opt-ice').innerText = t.optIce;
        
        document.getElementById('h3-load').innerText = t.h3Load;
        document.getElementById('lbl-weight-title').innerText = t.lblWeightTitle;
        document.getElementById('btn-add').innerText = t.btnAdd;
        document.getElementById('btn-rem').innerText = t.btnRem;
        document.getElementById('lbl-total-p').innerText = t.lblTotalP;
        document.getElementById('lbl-unit-p').innerText = t.unitN;
        
        document.getElementById('h3-exp').innerText = t.h3Exp;
        if(isPulling) {
            document.getElementById('btn-pull').innerHTML = t.btnStop;
        } else {
            document.getElementById('btn-pull').innerHTML = t.btnPull;
        }
        document.getElementById('btn-rec').innerText = t.btnRec;
        document.getElementById('btn-reset').innerText = t.btnReset;
        
        document.getElementById('lbl-hints-title').innerText = t.lblHintsTitle;
        document.getElementById('lbl-hints-text').innerText = t.lblHintsText;
        
        document.getElementById('lbl-info-f').innerText = t.lblInfoF;
        document.getElementById('lbl-info-p').innerText = t.lblInfoP;
        document.getElementById('lbl-info-state').innerText = t.lblInfoState;
        
        document.getElementById('svg-block').innerText = t.svgBlock;
        document.getElementById('svg-pull').innerText = t.svgPull;
        document.getElementById('text-fric').innerText = t.svgFric;
        
        document.getElementById('journal-title').innerText = t.journalTitle;
        document.getElementById('btn-clear').innerText = t.btnClear;
        
        for(let i=1; i<=5; i++) {
            document.getElementById('th-'+i).innerHTML = t['th'+i];
        }

        // Обновляем шкалу динамометра, чтобы перевести "Н"
        document.getElementById('scale-ticks').innerHTML = '';
        createScale();
    }


    // === CONFIG ===
    const BLOCK_WEIGHT = 1.0; 
    const WEIGHT_PER_UNIT = 1.0; 
    const MU_DICT = { wood: 0.3, rubber: 0.6, ice: 0.1 };
    
    // Scale config
    const PX_PER_N = 40; // 40 pixels per 1 Newton on scale
    const MAX_N = 5;

    // === STATE ===
    let surface = 'wood';
    let addedWeights = 0;
    let totalP = 1.0;
    
    let isPulling = false;
    let velocity = 0;
    let positionX = 50;
    let currentForce = 0;
    
    let animId = null;

    // === INIT ===
    function init() {
        createScale();
        applyTranslations();
        resetSim();
    }

    function createScale() {
        const g = document.getElementById('scale-ticks');
        const t = dict[currentLang];
        // Create 0 to 5N scale
        for(let i=0; i<=MAX_N; i++) {
            const x = i * PX_PER_N;
            
            // Major tick
            const tick = document.createElementNS("http://www.w3.org/2000/svg", "line");
            tick.setAttribute("x1", x); tick.setAttribute("y1", 0);
            tick.setAttribute("x2", x); tick.setAttribute("y2", -10);
            tick.setAttribute("class", "dyna-tick");
            g.appendChild(tick);

            // Number
            const txt = document.createElementNS("http://www.w3.org/2000/svg", "text");
            txt.setAttribute("x", x); txt.setAttribute("y", -15);
            txt.setAttribute("class", "dyna-text");
            txt.textContent = i;
            g.appendChild(txt);

            // Minor ticks (0.5)
            if(i < MAX_N) {
                const xMid = x + PX_PER_N/2;
                const tickSm = document.createElementNS("http://www.w3.org/2000/svg", "line");
                tickSm.setAttribute("x1", xMid); tickSm.setAttribute("y1", 0);
                tickSm.setAttribute("x2", xMid); tickSm.setAttribute("y2", -5);
                tickSm.setAttribute("class", "dyna-tick-sm");
                g.appendChild(tickSm);
            }
        }
        // Unit Label
        const unit = document.createElementNS("http://www.w3.org/2000/svg", "text");
        unit.setAttribute("x", MAX_N * PX_PER_N + 20); unit.setAttribute("y", -15);
        unit.setAttribute("class", "dyna-text");
        unit.textContent = t ? t.unitN : "Н";
        g.appendChild(unit);
    }

    // === LOGIC ===
    function changeWeights(delta) {
        if(isPulling) return;
        addedWeights += delta;
        if(addedWeights < 0) addedWeights = 0;
        if(addedWeights > 3) addedWeights = 3;
        resetSim();
    }

    function resetSim() {
        cancelAnimationFrame(animId);
        isPulling = false;
        velocity = 0;
        positionX = 50;
        currentForce = 0;
        
        surface = document.getElementById('surface-select').value;
        totalP = BLOCK_WEIGHT + (addedWeights * WEIGHT_PER_UNIT);
        
        updateVisuals();
        updateDOM();
    }

    function updateDOM() {
        const t = dict[currentLang];
        document.getElementById('lbl-weight').innerText = totalP.toFixed(1);
        document.getElementById('val-p').innerText = totalP.toFixed(2) + " " + t.unitN;
        document.getElementById('val-force').innerText = "0.00 " + t.unitN;
        
        // State updates based on language
        let stateEl = document.getElementById('state-text');
        if(!isPulling) {
            stateEl.innerText = t.stateRest;
            stateEl.style.color = "#333";
            document.getElementById('btn-pull').innerHTML = t.btnPull;
            document.getElementById('btn-pull').classList.remove('btn-res');
            document.getElementById('btn-pull').classList.add('btn-pull');
        }
        
        document.getElementById('btn-rec').disabled = true;

        // Weights Graphics
        const viz = document.getElementById('w-viz');
        viz.innerHTML = '';
        const svgW = document.getElementById('weights-group');
        svgW.innerHTML = '';
        
        for(let i=0; i<addedWeights; i++) {
            viz.innerHTML += '<div class="w-box"></div>';
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute("x", 10 + i*25);
            rect.setAttribute("y", 0);
            rect.setAttribute("width", 20); rect.setAttribute("height", 20);
            rect.setAttribute("class", "weight-svg");
            rect.setAttribute("rx", 2);
            svgW.appendChild(rect);
        }

        const surf = document.getElementById('surface-bg');
        if(surface === 'wood') surf.style.background = "repeating-linear-gradient(45deg, #d35400, #d35400 10px, #e67e22 10px, #e67e22 20px)";
        if(surface === 'rubber') surf.style.background = "#34495e";
        if(surface === 'ice') surf.style.background = "#d6eaf8";
    }

    function togglePull() {
        const t = dict[currentLang];
        if(isPulling) {
            resetSim();
        } else {
            isPulling = true;
            document.getElementById('btn-pull').innerHTML = t.btnStop;
            document.getElementById('btn-pull').classList.remove('btn-pull');
            document.getElementById('btn-pull').classList.add('btn-res');
            animatePull();
        }
    }

    function animatePull() {
        const t = dict[currentLang];
        const targetFriction = MU_DICT[surface] * totalP;
        let startTime = performance.now();
        
        function loop(now) {
            if(!isPulling) return;
            
            if (currentForce < targetFriction) {
                currentForce += 0.05; 
                document.getElementById('state-text').innerText = t.stateTension;
                document.getElementById('state-text').style.color = "#e67e22";
            } else {
                const noise = (Math.random() - 0.5) * 0.1;
                currentForce = targetFriction + noise;
                if(currentForce < 0) currentForce = 0;
                
                velocity = 2;
                positionX += velocity;
                if(positionX > 550) positionX = 50;
                
                document.getElementById('state-text').innerText = t.stateSlide;
                document.getElementById('state-text').style.color = "#27ae60";
                document.getElementById('btn-rec').disabled = false;
            }

            document.getElementById('val-force').innerText = currentForce.toFixed(2) + " " + t.unitN;
            updateVisuals();
            animId = requestAnimationFrame(loop);
        }
        animId = requestAnimationFrame(loop);
    }

    function updateVisuals() {
        const group = document.getElementById('moving-group');
        group.setAttribute('transform', `translate(${positionX}, 200)`);
        
        // Scale mapping: 0N = 0px, 1N = 40px
        const stretchPx = currentForce * PX_PER_N;
        
        document.getElementById('pointer').setAttribute('transform', `translate(${stretchPx}, 10)`);
        
        if(currentForce > 0.1) {
            document.getElementById('arrow-fric').setAttribute('opacity', 1);
            document.getElementById('text-fric').setAttribute('opacity', 1);
        } else {
            document.getElementById('arrow-fric').setAttribute('opacity', 0);
            document.getElementById('text-fric').setAttribute('opacity', 0);
        }
    }

    function recordData() {
        const t = dict[currentLang];
        const fFric = MU_DICT[surface] * totalP;
        const muCalc = fFric / totalP;
        
        const tbody = document.querySelector('#data-table tbody');
        const row = `<tr>
            <td>${t.surfNames[surface]}</td>
            <td>${addedWeights}</td>
            <td>${totalP.toFixed(1)}</td>
            <td>${fFric.toFixed(2)}</td>
            <td><b>${muCalc.toFixed(2)}</b></td>
        </tr>`;
        tbody.innerHTML += row;
        
        const wrapper = document.querySelector('.table-wrap');
        wrapper.scrollTop = wrapper.scrollHeight;
    }

    function clearTable() {
        document.querySelector('#data-table tbody').innerHTML = '';
    }

    init();
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Лабораторная работа: Второй закон Ньютона</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root { --primary: #2c3e50; --accent: #e74c3c; --bg: #fdfefe; --panel: #ffffff; --success: #27ae60; --text: #34495e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        /* КНОПКА ПЕРЕКЛЮЧЕНИЯ ЯЗЫКА */
        .lang-switch {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .grid-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            max-width: 1400px;
            width: 100%;
            margin-top: 40px;
        }

        .card { background: var(--panel); padding: 25px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
        
        h1 { color: var(--primary); border-bottom: 2px solid #ecf0f1; padding-bottom: 10px; margin-top: 0; font-size: 1.6rem; }
        h2 { font-size: 1.2rem; margin-top: 0; color: #2c3e50; }
        h3 { font-size: 1.1rem; color: #7f8c8d; margin-bottom: 10px; font-weight: 600; border-left: 4px solid var(--accent); padding-left: 10px; }

        .formula-row { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 10px; margin: 15px 0; }
        .formula-box { 
            background: #f8f9fa; padding: 15px; text-align: center; border-radius: 8px; 
            border: 1px solid #dfe6e9; min-width: 200px;
            font-family: 'Times New Roman', serif; font-size: 1.4rem; font-style: italic;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .formula-desc { font-family: 'Segoe UI', sans-serif; font-size: 0.85rem; color: #7f8c8d; font-style: normal; margin-top: 5px; }
        
        .fraction { display: inline-block; vertical-align: middle; text-align: center; margin: 0 5px; }
        .fraction-top { border-bottom: 1px solid #000; display: block; padding-bottom: 2px; }
        .fraction-bottom { display: block; padding-top: 2px; }
        sub, sup { font-size: 0.7em; }

        .control-group { margin-bottom: 20px; }
        label { display: flex; justify-content: space-between; font-weight: 600; margin-bottom: 8px; }
        input[type=range] { width: 100%; cursor: pointer; accent-color: var(--accent); }
        .val-display { color: #2980b9; font-weight: bold; font-family: monospace; font-size: 1.1em; }
        
        .stopwatch {
            background: #34495e; color: #f1c40f; font-family: 'Courier New', monospace; 
            font-size: 2.5rem; text-align: center; padding: 10px; border-radius: 6px; margin: 20px 0;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }

        .btn { border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; margin-top: 8px; color: white; font-size: 1rem; }
        .btn-start { background: var(--success); }
        .btn-start:disabled { background: #bdc3c7; cursor: not-allowed; }
        .btn-record { background: #2980b9; }
        .btn-reset { background: #95a5a6; }

        .hint-box { background: #fff3cd; color: #856404; padding: 10px; border-radius: 5px; border: 1px solid #ffeeba; font-size: 0.9rem; margin-top: 15px; }

        .simulation-card { grid-column: 2; grid-row: 2 / 3; height: 550px; display: flex; flex-direction: column; }
        .svg-container { flex-grow: 1; border: 1px solid #dfe6e9; background: #fff; border-radius: 8px; position: relative; overflow: hidden; }
        
        .track { stroke: #7f8c8d; stroke-width: 4; }
        .cart-body { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
        .cart-weight { fill: #f1c40f; stroke: #f39c12; stroke-width: 1; }
        .wheel { fill: #34495e; }
        .pulley { fill: #95a5a6; stroke: #7f8c8d; stroke-width: 2; }
        .string { stroke: #2c3e50; stroke-width: 2; fill: none; }
        .sensor { fill: #e67e22; opacity: 0.8; }
        .mass-hanger { fill: #e74c3c; stroke: #c0392b; stroke-width: 1; }
        
        .table-container { grid-column: 1 / -1; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
        th, td { border: 1px solid #bdc3c7; padding: 10px; text-align: center; }
        th { background-color: #ecf0f1; }

        .charts-container { grid-column: 1 / -1; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        canvas { width: 100%; max-height: 250px; }
    </style>
</head>
<body>

<button class="lang-switch" onclick="toggleLanguage()" id="lang-btn">RU / KZ</button>

<div class="grid-container">

    <div class="card" style="grid-column: 1 / -1;">
        <h1 data-key="title">Лабораторная работа №3: Проверка второго закона Ньютона</h1>
        
        <h3 data-key="goal_title">Цель работы:</h3>
        <p data-key="goal_text">Экспериментально проверить зависимость ускорения от действующей силы (a ~ F) и от массы системы (a ~ 1/m).</p>
        
        <h3 data-key="theory_title">Теоретическое обоснование:</h3>
        <p data-key="theory_text">Для системы связанных тел (каретка + груз на нити) ускорение можно найти двумя способами.</p>
        
        <div class="formula-row">
            <div class="formula-box">
                <div>
                    a = <div class="fraction">
                        <span class="fraction-top">F<sub>тяги</sub></span>
                        <span class="fraction-bottom">M<sub>сист</sub></span>
                    </div>
                    = 
                    <div class="fraction">
                        <span class="fraction-top">m<sub>гр</sub>g</span> <span class="fraction-bottom">M<sub>кар</sub> + m<sub>гр</sub></span>
                    </div>
                </div>
                <div class="formula-desc" data-key="f_desc1">1. По закону Ньютона (Теория)</div>
            </div>

            <div class="formula-box">
                <div>
                    S = <div class="fraction">
                        <span class="fraction-top">at<sup>2</sup></span>
                        <span class="fraction-bottom">2</span>
                    </div>
                    &Rightarrow;
                    a = <div class="fraction">
                        <span class="fraction-top">2S</span>
                        <span class="fraction-bottom">t<sup>2</sup></span>
                    </div>
                </div>
                <div class="formula-desc" data-key="f_desc2">2. Через эксперимент (Практика)</div>
            </div>
        </div>
    </div>

    <div class="card">
        <h2 data-key="params_title">Параметры установки</h2>
        
        <div class="control-group">
            <label><span data-key="label_s">Путь (S)</span>: <span class="val-display"><span id="s-val">0.50</span> <span data-key="unit_m">м</span></span></label>
            <input type="range" id="s-input" min="0.3" max="1.0" value="0.50" step="0.1" oninput="updateSetup()">
        </div>

        <div class="control-group">
            <label><span data-key="label_m_cart">Масса каретки (M)</span>: <span class="val-display"><span id="m-cart-val">200</span> <span data-key="unit_g">г</span></span></label>
            <input type="range" id="m-cart-input" min="100" max="500" value="200" step="50" oninput="updateSetup()">
        </div>

        <div class="control-group">
            <label><span data-key="label_m_load">Масса груза (m)</span>: <span class="val-display"><span id="m-hanger-val">50</span> <span data-key="unit_g">г</span></span></label>
            <input type="range" id="m-hanger-input" min="20" max="100" value="50" step="10" oninput="updateSetup()">
        </div>
        
        <div class="hint-box" id="system-info">
            </div>

        <div class="stopwatch">
            <span id="timer-display">0.000</span>
        </div>

        <button class="btn btn-start" id="btn-start" onclick="startSimulation()" data-key="btn_start">▶ ЗАПУСК</button>
        <button class="btn btn-record" id="btn-record" onclick="recordData()" disabled data-key="btn_record">⬇ ЗАПИСАТЬ</button>
        <button class="btn btn-reset" onclick="resetSim()" data-key="btn_reset">↺ СБРОС</button>
    </div>

    <div class="card simulation-card">
        <div class="svg-container">
            <svg id="sim-svg" viewBox="0 0 800 450" preserveAspectRatio="xMidYMid meet">
                <defs>
                    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#f0f0f0" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#grid)" />
                <line x1="50" y1="200" x2="720" y2="200" class="track" />
                <rect x="50" y="200" width="10" height="200" fill="#95a5a6" />
                <rect x="720" y="200" width="10" height="200" fill="#95a5a6" />
                <circle cx="720" cy="190" r="15" class="pulley" />
                <rect x="100" y="205" width="10" height="15" class="sensor" />
                <text x="105" y="235" class="ruler-text">0</text>
                <g id="sensor-2-group" transform="translate(300, 0)">
                    <rect x="0" y="205" width="10" height="15" class="sensor" />
                    <text x="5" y="235" class="ruler-text" id="sensor-2-text">0.5 м</text>
                </g>
                <polyline points="140,175 720,175 735,190 735,250" class="string" id="main-string" />
                <g id="cart-group" transform="translate(60, 160)">
                    <rect x="0" y="10" width="80" height="30" class="cart-body" />
                    <circle cx="20" cy="45" r="5" class="wheel" />
                    <circle cx="60" cy="45" r="5" class="wheel" />
                    <g id="cart-weights-visual"></g>
                    <text x="40" y="30" font-size="11" fill="white" text-anchor="middle" id="cart-text">M</text>
                </g>
                <g id="hanger-group" transform="translate(735, 250)">
                    <g id="hanger-weights-visual">
                        <rect x="-10" y="0" width="20" height="20" class="mass-hanger" />
                    </g>
                    <text x="25" y="15" font-size="12" fill="#7f8c8d" id="hanger-text">m</text>
                </g>
            </svg>
        </div>
        <div style="padding: 10px; background: #ecf0f1; border-top: 1px solid #ddd;">
            <strong data-key="status_label">Статус:</strong> <span id="status-text" data-key="status_ready">Готов к эксперименту</span>
        </div>
    </div>

    <div class="card table-container">
        <div style="display: flex; justify-content: space-between;">
            <h2 data-key="table_title">Таблица измерений</h2>
            <button class="btn" style="width: auto; background: #e74c3c; padding: 5px 15px;" onclick="clearTable()" data-key="btn_clear">Очистить таблицу</button>
        </div>
        <table id="data-table">
            <thead>
                <tr>
                    <th>№</th>
                    <th data-key="th_m_load">m (кг)</th>
                    <th data-key="th_m_cart">M (кг)</th>
                    <th data-key="th_f">F (Н)</th>
                    <th data-key="th_s">S (м)</th>
                    <th data-key="th_t">t (с)</th>
                    <th data-key="th_a">a (м/с²)</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="charts-container">
        <div class="card">
            <h3 data-key="chart_af_title">График a(F)</h3>
            <canvas id="chartAF"></canvas>
            <p style="text-align: center; color: #7f8c8d; font-size: 0.9em;" data-key="chart_af_sub">Часть 1: M_сист = const</p>
        </div>
        <div class="card">
            <h3 data-key="chart_am_title">График a(1/M)</h3>
            <canvas id="chartAM"></canvas>
            <p style="text-align: center; color: #7f8c8d; font-size: 0.9em;" data-key="chart_am_sub">Часть 2: F = const</p>
        </div>
    </div>

</div>

<script>
    // === ЛОКАЛИЗАЦИЯ ===
    let currentLang = 'ru';
    const translations = {
        ru: {
            title: "Лабораторная работа №3: Проверка второго закона Ньютона",
            goal_title: "Цель работы:",
            goal_text: "Экспериментально проверить зависимость ускорения от действующей силы (a ~ F) и от массы системы (a ~ 1/m).",
            theory_title: "Теоретическое обоснование:",
            theory_text: "Для системы связанных тел (каретка + груз на нити) ускорение можно найти двумя способами.",
            f_desc1: "1. По закону Ньютона (Теория)",
            f_desc2: "2. Через эксперимент (Практика)",
            params_title: "Параметры установки",
            label_s: "Путь (S)",
            label_m_cart: "Масса каретки (M)",
            label_m_load: "Масса груза (m)",
            unit_m: "м", unit_g: "г",
            btn_start: "▶ ЗАПУСК",
            btn_record: "⬇ ЗАПИСАТЬ",
            btn_reset: "↺ СБРОС",
            btn_clear: "Очистить таблицу",
            status_label: "Статус:",
            status_ready: "Готов к эксперименту",
            status_moving: "Система движется...",
            status_done: "Завершено. Запишите данные.",
            status_saved: "Записано.",
            table_title: "Таблица измерений",
            th_m_load: "m (кг)", th_m_cart: "M (кг)", th_f: "F (Н)", th_s: "S (м)", th_t: "t (с)", th_a: "a (м/с²)",
            chart_af_title: "График a(F)",
            chart_af_sub: "Часть 1: M_сист = const",
            chart_am_title: "График a(1/M)",
            chart_am_sub: "Часть 2: F = const",
            sys_mass: "Масса системы",
            sys_force: "Сила тяги",
            axis_f: "Сила F (Н)",
            axis_a: "Ускорение a (м/с²)",
            axis_m_inv: "1 / M_системы (1/кг)"
        },
        kz: {
            title: "№3 Зертханалық жұмыс: Ньютонның екінші заңын тексеру",
            goal_title: "Жұмыстың мақсаты:",
            goal_text: "Үдеудің әсер етуші күшке (a ~ F) және жүйенің массасына (a ~ 1/m) тәуелділігін тәжірибе жүзінде тексеру.",
            theory_title: "Теориялық негіздеме:",
            theory_text: "Байланысқан денелер жүйесі үшін (арбаша + жіптегі жүк) үдеуді екі жолмен табуға болады.",
            f_desc1: "1. Ньютон заңы бойынша (Теория)",
            f_desc2: "2. Тәжірибе арқылы (Практика)",
            params_title: "Қондырғы параметрлері",
            label_s: "Жол (S)",
            label_m_cart: "Арбаша массасы (M)",
            label_m_load: "Жүктің массасы (m)",
            unit_m: "м", unit_g: "г",
            btn_start: "▶ ІСКЕ ҚОСУ",
            btn_record: "⬇ ЖАЗУ",
            btn_reset: "↺ ҚАЛПЫНА КЕЛТІРУ",
            btn_clear: "Кестені тазалау",
            status_label: "Күйі:",
            status_ready: "Тәжірибеге дайын",
            status_moving: "Жүйе қозғалуда...",
            status_done: "Аяқталды. Мәліметтерді жазыңыз.",
            status_saved: "Жазылды.",
            table_title: "Өлшеулер кестесі",
            th_m_load: "m (кг)", th_m_cart: "M (кг)", th_f: "F (Н)", th_s: "S (м)", th_t: "t (с)", th_a: "a (м/с²)",
            chart_af_title: "a(F) графигі",
            chart_af_sub: "1-бөлім: M_жүйе = const",
            chart_am_title: "a(1/M) графигі",
            chart_am_sub: "2-бөлім: F = const",
            sys_mass: "Жүйе массасы",
            sys_force: "Тарту күші",
            axis_f: "F күші (Н)",
            axis_a: "a үдеуі (м/с²)",
            axis_m_inv: "1 / M_жүйе (1/кг)"
        }
    };

    function toggleLanguage() {
        currentLang = currentLang === 'ru' ? 'kz' : 'ru';
        updateLanguageUI();
    }

    function updateLanguageUI() {
        document.querySelectorAll('[data-key]').forEach(el => {
            const key = el.getAttribute('data-key');
            if (translations[currentLang][key]) {
                el.innerText = translations[currentLang][key];
            }
        });
        
        // Обновление осей графиков
        chartAF.options.scales.x.title.text = translations[currentLang].axis_f;
        chartAF.options.scales.y.title.text = translations[currentLang].axis_a;
        chartAM.options.scales.x.title.text = translations[currentLang].axis_m_inv;
        chartAM.options.scales.y.title.text = translations[currentLang].axis_a;
        chartAF.update();
        chartAM.update();
        
        updateSetup(); // Обновить динамические тексты
    }

    // === КОНСТАНТЫ И ЛОГИКА ===
    const g = 9.81;
    const PIXELS_PER_METER = 400; 
    const START_CART_X = 60;      
    const PULLEY_X = 720;         
    const CART_ZERO_POS = 20;     

    let S = 0.5;
    let m_cart = 0.2; 
    let m_hanger = 0.05; 
    let measuredTime = 0;
    let isRunning = false;
    let animationId = null;

    const ui = {
        sInput: document.getElementById('s-input'),
        mCartInput: document.getElementById('m-cart-input'),
        mHangerInput: document.getElementById('m-hanger-input'),
        sVal: document.getElementById('s-val'),
        mCartVal: document.getElementById('m-cart-val'),
        mHangerVal: document.getElementById('m-hanger-val'),
        systemInfo: document.getElementById('system-info'),
        timer: document.getElementById('timer-display'),
        cartGroup: document.getElementById('cart-group'),
        hangerGroup: document.getElementById('hanger-group'),
        mainString: document.getElementById('main-string'),
        sensor2Group: document.getElementById('sensor-2-group'),
        sensor2Text: document.getElementById('sensor-2-text'),
        cartWeightsVis: document.getElementById('cart-weights-visual'),
        hangerWeightsVis: document.getElementById('hanger-weights-visual'),
        cartText: document.getElementById('cart-text'),
        hangerText: document.getElementById('hanger-text'),
        status: document.getElementById('status-text'),
        btnStart: document.getElementById('btn-start'),
        btnRecord: document.getElementById('btn-record'),
        tableBody: document.querySelector('#data-table tbody')
    };

    const chartAF = new Chart(document.getElementById('chartAF'), { 
        type: 'scatter', 
        data: { datasets: [{ data: [], backgroundColor: '#e74c3c', pointRadius: 7 }] }, 
        options: { responsive: true, plugins: { legend: { display: false } }, scales: { x: { title: {display:true, text: 'Сила F (Н)'}}, y: { title: {display:true, text:'Ускорение a (м/с²)'}} } } 
    });

    const chartAM = new Chart(document.getElementById('chartAM'), { 
        type: 'scatter', 
        data: { datasets: [{ data: [], backgroundColor: '#27ae60', pointRadius: 7 }] }, 
        options: { responsive: true, plugins: { legend: { display: false } }, scales: { x: { title: {display:true, text: '1 / M_системы'}}, y: { title: {display:true, text:'Ускорение a (м/с²)'}} } } 
    });

    function updateSetup() {
        if (isRunning) return;
        S = parseFloat(ui.sInput.value);
        m_cart = parseInt(ui.mCartInput.value) / 1000;
        m_hanger = parseInt(ui.mHangerInput.value) / 1000;

        ui.sVal.innerText = S.toFixed(2);
        ui.mCartVal.innerText = (m_cart * 1000).toFixed(0);
        ui.mHangerVal.innerText = (m_hanger * 1000).toFixed(0);
        
        const totalMass = m_cart + m_hanger;
        const force = m_hanger * g;
        
        ui.systemInfo.innerHTML = `${translations[currentLang].sys_mass} (M + m): <strong>${(totalMass*1000).toFixed(0)} ${translations[currentLang].unit_g}</strong><br>
                                   ${translations[currentLang].sys_force} F: <strong>${force.toFixed(2)} Н</strong>`;

        ui.sensor2Text.textContent = S.toFixed(2) + ' ' + translations[currentLang].unit_m;
        ui.cartText.textContent = (m_cart*1000) + 'g';
        ui.hangerText.textContent = (m_hanger*1000) + 'g';

        // Визуализация весов
        ui.cartWeightsVis.innerHTML = '';
        const count = Math.floor(((m_cart * 1000) - 100) / 50);
        for(let i=0; i<count; i++) {
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute("x", 10); rect.setAttribute("y", -5 * (i+1));
            rect.setAttribute("width", 60); rect.setAttribute("height", 5);
            rect.setAttribute("class", "cart-weight");
            ui.cartWeightsVis.appendChild(rect);
        }

        ui.hangerWeightsVis.innerHTML = '';
        const h_height = 20 + ((m_hanger*1000 - 20)/10)*5; 
        const rectH = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rectH.setAttribute("x", -10); rectH.setAttribute("y", 0);
        rectH.setAttribute("width", 20); rectH.setAttribute("height", h_height);
        rectH.setAttribute("class", "mass-hanger");
        ui.hangerWeightsVis.appendChild(rectH);

        ui.cartGroup.setAttribute('transform', `translate(${CART_ZERO_POS}, 160)`);
        const sensor2X = 100 + S * PIXELS_PER_METER;
        ui.sensor2Group.setAttribute('transform', `translate(${sensor2X}, 0)`);
        const hangerY = 190 + 50; 
        ui.hangerGroup.setAttribute('transform', `translate(${PULLEY_X + 15}, ${hangerY})`);
        updateString(CART_ZERO_POS, hangerY);
        ui.timer.innerText = "0.000";
    }

    function updateString(cartX, hangerY) {
        ui.mainString.setAttribute("points", `${cartX + 80},175 ${PULLEY_X},175 ${PULLEY_X + 15},190 ${PULLEY_X + 15},${hangerY}`);
    }

    function startSimulation() {
        if (isRunning) return;
        isRunning = true;
        ui.btnStart.disabled = true;
        ui.status.innerText = translations[currentLang].status_moving;

        const a_theor = (m_hanger * g) / (m_cart + m_hanger);
        measuredTime = Math.sqrt((2 * S) / a_theor) + (Math.random() - 0.5) * 0.03;

        let startTime = null;
        function animate(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = (timestamp - startTime) / 1000;
            if (elapsed < measuredTime) {
                const s_curr = 0.5 * ((2 * S) / (measuredTime**2)) * (elapsed**2);
                const px = s_curr * PIXELS_PER_METER;
                ui.cartGroup.setAttribute('transform', `translate(${CART_ZERO_POS + px}, 160)`);
                ui.hangerGroup.setAttribute('transform', `translate(${PULLEY_X + 15}, ${240 + px})`);
                updateString(CART_ZERO_POS + px, 240 + px);
                ui.timer.innerText = elapsed.toFixed(3);
                animationId = requestAnimationFrame(animate);
            } else {
                finishRun();
            }
        }
        animationId = requestAnimationFrame(animate);
    }

    function finishRun() {
        isRunning = false;
        ui.btnStart.disabled = false;
        ui.btnRecord.disabled = false;
        ui.timer.innerText = measuredTime.toFixed(3);
        ui.status.innerText = translations[currentLang].status_done;
    }

    function recordData() {
        ui.btnRecord.disabled = true;
        const t = measuredTime;
        const F = m_hanger * g;
        const a = (2 * S) / (t * t);
        const row = document.createElement('tr');
        row.innerHTML = `<td>${ui.tableBody.children.length + 1}</td><td>${m_hanger.toFixed(3)}</td><td>${m_cart.toFixed(3)}</td><td>${F.toFixed(2)}</td><td>${S.toFixed(2)}</td><td>${t.toFixed(3)}</td><td>${a.toFixed(2)}</td>`;
        ui.tableBody.appendChild(row);
        chartAF.data.datasets[0].data.push({x: F, y: a});
        chartAM.data.datasets[0].data.push({x: 1/(m_cart+m_hanger), y: a});
        chartAF.update(); chartAM.update();
        ui.status.innerText = translations[currentLang].status_saved;
    }

    function resetSim() {
        cancelAnimationFrame(animationId);
        isRunning = false;
        ui.btnStart.disabled = false;
        updateSetup();
        ui.status.innerText = translations[currentLang].status_ready;
    }

    function clearTable() {
        ui.tableBody.innerHTML = '';
        chartAF.data.datasets[0].data = [];
        chartAM.data.datasets[0].data = [];
        chartAF.update(); chartAM.update();
    }

    updateLanguageUI(); // Инициализация
</script>
</body>
</html>
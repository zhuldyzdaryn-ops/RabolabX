<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лаб. работа №10: Плавание тел</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #2980b9;
            --bg: #ecf0f1;
            --water: rgba(52, 152, 219, 0.7);
            --sand: #f39c12;
            --radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: var(--bg);
            color: var(--primary);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* HEADER */
        header {
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }
        .header-left {
            display: flex;
            flex-direction: column;
        }
        h1 { margin: 0; font-size: 1.3rem; }
        .goal {
            margin-top: 5px;
            font-size: 0.9rem;
            font-style: italic;
            opacity: 0.9;
            border-left: 3px solid #f1c40f;
            padding-left: 10px;
        }

        .lang-switch {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.4);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
            white-space: nowrap;
            margin-left: 20px;
        }
        .lang-switch:hover { background: rgba(255,255,255,0.3); }

        /* WORKSPACE */
        .workspace {
            display: flex;
            flex: 1;
            overflow: hidden;
            padding: 10px;
            gap: 10px;
        }

        /* SIDEBAR */
        .sidebar {
            width: 300px;
            background: white;
            padding: 15px;
            border-radius: var(--radius);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow-y: auto;
        }

        .control-group {
            border: 1px solid #eee;
            padding: 12px;
            border-radius: 6px;
            background: #fdfdfd;
        }
        
        label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.95rem; }
        input[type=range] { width: 100%; cursor: pointer; }
        
        .btn {
            width: 100%;
            padding: 10px;
            margin-top: 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            transition: 0.2s;
            font-size: 0.95rem;
        }
        .btn-scale { background: #e67e22; }
        .btn-water { background: #3498db; }
        .btn-record { background: #27ae60; margin-top: auto; }
        .btn-reset { background: #7f8c8d; margin-top: 10px; }
        .btn:hover { opacity: 0.9; transform: translateY(-1px); }

        .readout {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            text-align: center;
            background: #222;
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            margin-top: 5px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
        }

        /* SIMULATION AREA */
        .sim-area {
            flex: 1;
            position: relative;
            background: radial-gradient(circle at center, #ffffff, #eef2f3);
            border-radius: var(--radius);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
            border: 1px solid #dcdcdc;
            overflow: hidden;
        }

        /* --- EQUIPMENT --- */

        /* SCALES */
        .scales-container {
            position: absolute;
            left: 15%;
            bottom: 50px;
            width: 140px;
            height: 120px;
        }
        .scales-base {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40px;
            background: #7f8c8d;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: monospace;
            font-size: 1.1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        .scales-stem {
            position: absolute;
            bottom: 40px;
            left: 65px;
            width: 10px;
            height: 40px;
            background: #95a5a6;
        }
        .scales-plate {
            position: absolute;
            bottom: 80px; 
            left: 10px;
            width: 120px;
            height: 10px;
            background: #34495e;
            border-radius: 2px;
            transition: transform 0.2s;
        }

        /* BEAKER */
        .beaker-container {
            position: absolute;
            left: 60%;
            bottom: 50px;
            width: 140px;
            height: 250px;
        }
        .beaker {
            width: 100%;
            height: 100%;
            border: 3px solid #7f8c8d;
            border-top: none;
            background: rgba(255,255,255,0.3);
            border-radius: 0 0 10px 10px;
            position: relative;
            overflow: hidden;
        }
        .liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 150px;
            background: var(--water);
            transition: height 0.5s ease-out;
            border-top: 2px solid rgba(255,255,255,0.6);
        }
        .graduation {
            position: absolute;
            right: 0;
            width: 20px;
            height: 100%;
            border-left: 1px solid #333;
        }
        .tick { position: absolute; right: 0; height: 1px; background: #333; width: 6px; }
        .tick-label { position: absolute; right: 8px; font-size: 10px; transform: translateY(-50%); }

        /* TEST TUBE */
        .test-tube {
            width: 30px;
            height: 80px;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid #555;
            border-radius: 0 0 15px 15px;
            position: absolute;
            left: 40%; 
            bottom: 200px;
            display: flex;
            flex-direction: column-reverse;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 1, 0.5, 1);
            box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
            z-index: 100;
        }
        .sand {
            width: 100%;
            height: 20%;
            background: var(--sand);
            transition: height 0.2s;
        }
        .cork {
            position: absolute;
            top: -5px; left: 2px;
            width: 24px; height: 5px;
            background: #c0392b;
            border-radius: 2px;
        }

        /* JOURNAL */
        .journal {
            width: 350px;
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }
        .journal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .journal h3 { margin: 0; font-size: 1.1rem; color: var(--primary); }
        
        .table-wrapper {
            flex: 1;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 4px;
        }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        th, td { border: 1px solid #ddd; padding: 6px 4px; text-align: center; }
        th { background: #f8f9fa; position: sticky; top: 0; box-shadow: 0 1px 0 #ddd; }
        
        .result-float { color: #27ae60; font-weight: bold; }
        .result-sink { color: #c0392b; font-weight: bold; }
        
        .btn-clear { 
            padding: 4px 10px; 
            background: #ecf0f1; 
            border: 1px solid #bdc3c7; 
            cursor: pointer; 
            border-radius: 4px; 
            font-size: 0.8rem; 
            font-weight: bold;
            color: #34495e;
            transition: 0.2s;
        }
        .btn-clear:hover { background: #e0e6ed; }

        .formulas-box {
            font-size: 0.85rem; 
            margin-top: 15px; 
            color: #555; 
            background: #f9f9f9; 
            padding: 10px; 
            border-left: 3px solid var(--accent);
            border-radius: 0 4px 4px 0;
        }

    </style>
</head>
<body>

<header>
    <div class="header-left">
        <h1 id="main-title">Лабораторная работа №10: Выяснение условий плавания тела в жидкости</h1>
        <div class="goal" id="main-goal">Цель работы: на опыте выяснить условия, при которых тело плавает и при которых тонет.</div>
    </div>
    <button class="lang-switch" onclick="toggleLang()">RU / KZ</button>
</header>

<div class="workspace">
    
    <div class="sidebar">
        <div class="control-group">
            <label id="lbl-sand">Количество песка (Масса):</label>
            <input type="range" id="sandRange" min="0" max="40" value="10" step="1" oninput="updateSettings()">
            <div style="text-align: right; font-size: 0.9rem; font-weight: bold; margin-top: 5px; color: var(--accent);" id="massDisplay">Общая масса: 20 г</div>
        </div>

        <div class="control-group">
            <label id="lbl-controls">Управление:</label>
            <button class="btn btn-scale" id="btn-scale" onclick="moveToScales()">1. На весы (Взвесить)</button>
            <button class="btn btn-water" id="btn-water" onclick="moveToWater()">2. В воду (Погрузить)</button>
        </div>

        <div class="control-group">
            <label id="lbl-readout">Показания весов / Сила:</label>
            <div class="readout" id="mainReadout">---</div>
            <div id="statusText" style="text-align: center; font-size: 0.85rem; margin-top: 8px; color: #555; font-weight: 600;"></div>
        </div>

        <button class="btn btn-record" id="btn-record" onclick="recordResult()">Записать в таблицу</button>
        <button class="btn btn-reset" id="btn-reset" onclick="resetPos()">Сброс положения</button>
    </div>

    <div class="sim-area">
        <div class="scales-container">
            <div class="scales-plate" id="scalePlate"></div>
            <div class="scales-stem"></div>
            <div class="scales-base" id="scaleScreen">0.0 г</div>
        </div>

        <div class="beaker-container">
            <div class="beaker">
                <div class="liquid" id="liquid"></div>
                <div class="graduation" id="grad"></div>
            </div>
            <div style="text-align:center; font-weight:bold; margin-top:5px; color: #34495e;" id="beaker-lbl">Мензурка</div>
        </div>

        <div class="test-tube" id="tube">
            <div class="cork"></div>
            <div class="sand" id="visualSand"></div>
        </div>
    </div>

    <div class="journal">
        <div class="journal-header">
            <h3 id="journal-title">Результаты измерений</h3>
            <button class="btn-clear" id="btn-clear" onclick="clearTable()">Очистить</button>
        </div>
        
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th id="th-1">№</th>
                        <th id="th-2">V<sub>1</sub><br>(мл)</th>
                        <th id="th-3">V<sub>2</sub><br>(мл)</th>
                        <th id="th-4">m<br>(г)</th>
                        <th id="th-5">F<sub>тяж</sub><br>(Н)</th>
                        <th id="th-6">F<sub>A</sub><br>(Н)</th>
                        <th id="th-7">Итог</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
        
        <div class="formulas-box">
            <strong id="lbl-formulas">Формулы:</strong><br>
            <span style="display:inline-block; margin-top: 5px;" id="form-1">1. F<sub>тяж</sub> = (m / 1000) &middot; g</span> <br>
            <span style="display:inline-block; margin-top: 5px;" id="form-2">2. F<sub>A</sub> = &rho;<sub>ж</sub> &middot; g &middot; (V<sub>2</sub> - V<sub>1</sub>)</span>
        </div>
    </div>

</div>

<script>
    // --- ЛОКАЛИЗАЦИЯ (СЛОВАРЬ) ---
    const dict = {
        ru: {
            title: "Лаб. работа №10: Плавание тел",
            h1: "Лабораторная работа №10: Выяснение условий плавания тела в жидкости",
            goal: "Цель работы: на опыте выяснить условия, при которых тело плавает и при которых тонет.",
            lblSand: "Количество песка (Масса):",
            massPrefix: "Общая масса:",
            lblControls: "Управление:",
            btnScale: "1. На весы (Взвесить)",
            btnWater: "2. В воду (Погрузить)",
            lblReadout: "Показания весов / Сила:",
            btnRecord: "Записать в таблицу",
            btnReset: "Сброс положения",
            beakerLbl: "Мензурка",
            journalTitle: "Результаты",
            btnClear: "Очистить",
            th1: "№",
            th2: "V<sub>1</sub><br>(мл)",
            th3: "V<sub>2</sub><br>(мл)",
            th4: "m<br>(г)",
            th5: "F<sub>тяж</sub><br>(Н)",
            th6: "F<sub>A</sub><br>(Н)",
            th7: "Итог",
            formulas: "Формулы:",
            form1: "1. F<sub>тяж</sub> = (m / 1000) &middot; g",
            form2: "2. F<sub>A</sub> = &rho;<sub>ж</sub> &middot; g &middot; (V<sub>2</sub> - V<sub>1</sub>) / 10<sup>6</sup>",
            statusScale: "Сила тяжести F<sub>тяж</sub>",
            statusSink: "Тело тонет (F<sub>тяж</sub> > F<sub>A</sub>)",
            statusFloat: "Тело плавает (F<sub>тяж</sub> = F<sub>A</sub>)",
            resSink: "Тонет",
            resFloat: "Плавает",
            alertTxt: "Пожалуйста, сначала погрузите тело в воду.",
            unitG: "г",
            unitN: "Н"
        },
        kz: {
            title: "Зертхана №10: Денелердің жүзуі",
            h1: "Зертханалық жұмыс №10: Денелердің сұйықтықта жүзу шарттарын анықтау",
            goal: "Жұмыс мақсаты: тәжірибе жүзінде дененің жүзу және бату шарттарын анықтау.",
            lblSand: "Құм мөлшері (Масса):",
            massPrefix: "Жалпы масса:",
            lblControls: "Басқару:",
            btnScale: "1. Таразыға (Өлшеу)",
            btnWater: "2. Суға (Батыру)",
            lblReadout: "Таразы көрсеткіші / Күш:",
            btnRecord: "Кестеге жазу",
            btnReset: "Орнына қайтару",
            beakerLbl: "Мензурка",
            journalTitle: "Нәтижелер",
            btnClear: "Тазарту",
            th1: "№",
            th2: "V<sub>1</sub><br>(мл)",
            th3: "V<sub>2</sub><br>(мл)",
            th4: "m<br>(г)",
            th5: "F<sub>ауыр</sub><br>(Н)",
            th6: "F<sub>A</sub><br>(Н)",
            th7: "Қорытынды",
            formulas: "Формулалар:",
            form1: "1. F<sub>ауыр</sub> = (m / 1000) &middot; g",
            form2: "2. F<sub>A</sub> = &rho;<sub>с</sub> &middot; g &middot; (V<sub>2</sub> - V<sub>1</sub>) / 10<sup>6</sup>",
            statusScale: "Ауырлық күші F<sub>ауыр</sub>",
            statusSink: "Дене батады (F<sub>ауыр</sub> > F<sub>A</sub>)",
            statusFloat: "Дене жүзеді (F<sub>ауыр</sub> = F<sub>A</sub>)",
            resSink: "Батады",
            resFloat: "Жүзеді",
            alertTxt: "Өтінеміз, алдымен денені суға батырыңыз.",
            unitG: "г",
            unitN: "Н"
        }
    };

    let currentLang = 'ru';

    // --- ФИЗИЧЕСКИЕ КОНСТАНТЫ ---
    const g = 9.8;
    const rho_water = 1000; // kg/m3
    const tubeEmptyMass = 10; // g
    const tubeMaxVolume = 40; // cm3 (ml)
    const tubeHeightPx = 80;

    // Позиции для анимации
    const posScale = { left: '17%', bottom: '140px' };
    const posWaterX = '62.5%';
    const posStart = { left: '40%', bottom: '200px' };
    const beakerBottomY = 50;

    // --- СОСТОЯНИЕ ---
    let currentSand = 10;
    let totalMass = 20;
    let locationState = 'air'; // 'air', 'scale', 'water'
    let v1 = 100; // ml
    let v2 = 100; // ml
    let historyData = [];

    // --- ИНИЦИАЛИЗАЦИЯ ---
    function init() {
        createGraduations();
        updateSettings();
        applyTranslations();
    }

    function toggleLang() {
        currentLang = currentLang === 'ru' ? 'kz' : 'ru';
        applyTranslations();
    }

    function applyTranslations() {
        const t = dict[currentLang];
        document.title = t.title;
        document.getElementById('main-title').innerText = t.h1;
        document.getElementById('main-goal').innerText = t.goal;
        document.getElementById('lbl-sand').innerText = t.lblSand;
        document.getElementById('lbl-controls').innerText = t.lblControls;
        document.getElementById('btn-scale').innerText = t.btnScale;
        document.getElementById('btn-water').innerText = t.btnWater;
        document.getElementById('lbl-readout').innerText = t.lblReadout;
        document.getElementById('btn-record').innerText = t.btnRecord;
        document.getElementById('btn-reset').innerText = t.btnReset;
        document.getElementById('beaker-lbl').innerText = t.beakerLbl;
        document.getElementById('journal-title').innerText = t.journalTitle;
        document.getElementById('btn-clear').innerText = t.btnClear;
        
        // Заголовки таблицы
        for(let i=1; i<=7; i++) {
            document.getElementById('th-'+i).innerHTML = t['th'+i];
        }

        // Формулы
        document.getElementById('lbl-formulas').innerText = t.formulas;
        document.getElementById('form-1').innerHTML = t.form1;
        document.getElementById('form-2').innerHTML = t.form2;
        
        updateDynamicTexts();
        renderTable();
    }

    function createGraduations() {
        const el = document.getElementById('grad');
        for(let i=0; i<=200; i+=20) {
            const y = (i/200)*100;
            const tick = document.createElement('div');
            tick.className = 'tick';
            tick.style.bottom = y + '%';
            el.appendChild(tick);
            if(i%50===0 && i>0){
                const lbl = document.createElement('div');
                lbl.className = 'tick-label';
                lbl.style.bottom = y + '%';
                lbl.innerText = i;
                el.appendChild(lbl);
            }
        }
    }

    // --- ЛОГИКА СИМУЛЯЦИИ ---
    function updateSettings() {
        const val = parseInt(document.getElementById('sandRange').value);
        currentSand = val;
        totalMass = tubeEmptyMass + currentSand;
        
        const hPct = (currentSand / 40) * 90;
        document.getElementById('visualSand').style.height = hPct + '%';

        updateDynamicTexts();
    }

    function updateDynamicTexts() {
        const t = dict[currentLang];
        document.getElementById('massDisplay').innerText = `${t.massPrefix} ${totalMass} ${t.unitG}`;

        if (locationState === 'air') {
             document.getElementById('scaleScreen').innerText = `0.0 ${t.unitG}`;
             document.getElementById('mainReadout').innerText = '---';
             document.getElementById('statusText').innerHTML = '';
        } 
        else if (locationState === 'scale') {
             document.getElementById('scaleScreen').innerText = `${totalMass.toFixed(1)} ${t.unitG}`;
             const Fg = (totalMass/1000)*g;
             document.getElementById('mainReadout').innerText = `${Fg.toFixed(2)} ${t.unitN}`;
             document.getElementById('statusText').innerHTML = t.statusScale;
        } 
        else if (locationState === 'water') {
             document.getElementById('scaleScreen').innerText = `0.0 ${t.unitG}`;
             
             const Fg = (totalMass/1000) * g;
             const Fa_max = (tubeMaxVolume/1000000) * rho_water * g;
             let submergedVol = (Fg > Fa_max) ? tubeMaxVolume : totalMass;
             const Fa = (submergedVol/1000000)*rho_water*g;
             
             document.getElementById('mainReadout').innerText = `${Fa.toFixed(2)} ${t.unitN}`;
             document.getElementById('statusText').innerHTML = (Fg > Fa_max) ? t.statusSink : t.statusFloat;
        }
    }

    function resetPos() {
        locationState = 'air';
        const tube = document.getElementById('tube');
        tube.style.left = posStart.left;
        tube.style.bottom = posStart.bottom;
        
        document.getElementById('scalePlate').style.transform = 'translateY(0)';
        
        v2 = v1;
        setLiquidLevel(v1);
        updateDynamicTexts();
    }

    function moveToScales() {
        locationState = 'scale';
        const tube = document.getElementById('tube');
        
        tube.style.left = posScale.left;
        tube.style.bottom = posScale.bottom;
        
        setTimeout(() => {
             document.getElementById('scalePlate').style.transform = 'translateY(5px)';
             updateDynamicTexts();
        }, 600);
        
        setLiquidLevel(v1);
        document.getElementById('mainReadout').innerText = '...';
        document.getElementById('statusText').innerHTML = '...';
    }

    function moveToWater() {
        locationState = 'water';
        const tube = document.getElementById('tube');
        
        tube.style.left = posWaterX;
        document.getElementById('scalePlate').style.transform = 'translateY(0)';
        
        const Fg = (totalMass/1000) * g;
        const Fa_max = (tubeMaxVolume/1000000) * rho_water * g;
        
        let submergedVol = 0;
        let isSinking = (Fg > Fa_max);
        submergedVol = isSinking ? tubeMaxVolume : totalMass;
        
        const pxPerMl = 1.25;
        const v1_px = v1 * pxPerMl;
        v2 = v1 + submergedVol;
        const v2_px = v2 * pxPerMl;
        
        let tubeBottomRelToBeaker = 0;
        
        if (isSinking) {
            tubeBottomRelToBeaker = 5; 
        } else {
            const depth = (submergedVol / tubeMaxVolume) * tubeHeightPx;
            tubeBottomRelToBeaker = v2_px - depth;
        }
        
        const absoluteBottom = beakerBottomY + tubeBottomRelToBeaker;
        tube.style.bottom = absoluteBottom + 'px';
        
        document.getElementById('mainReadout').innerText = '...';
        document.getElementById('statusText').innerHTML = '...';

        setTimeout(() => {
             setLiquidLevel(v2);
             updateDynamicTexts();
        }, 300);
    }

    function setLiquidLevel(ml) {
        const pct = (ml / 200) * 100;
        document.getElementById('liquid').style.height = pct + '%';
    }

    // --- ЖУРНАЛ ИЗМЕРЕНИЙ ---
    function recordResult() {
        const t = dict[currentLang];
        if (locationState !== 'water') {
            alert(t.alertTxt);
            return;
        }
        
        const Fg = (totalMass/1000)*g;
        const Vsub = v2 - v1;
        const Fa = (Vsub/1000000)*rho_water*g;
        
        let state = "float";
        if (Fg > Fa) {
            state = "sink";
        }
        
        historyData.push({
            v1: v1,
            v2: v2.toFixed(1),
            m: totalMass,
            fg: Fg.toFixed(2),
            fa: Fa.toFixed(2),
            state: state
        });
        
        renderTable();
        
        // Автоскролл таблицы вниз
        const wrapper = document.querySelector('.table-wrapper');
        wrapper.scrollTop = wrapper.scrollHeight;
    }

    function renderTable() {
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = '';
        const t = dict[currentLang];
        
        historyData.forEach((row, index) => {
            const tr = document.createElement('tr');
            
            let resText = t.resFloat;
            let style = "result-float";
            if (row.state === 'sink') {
                resText = t.resSink;
                style = "result-sink";
            }

            tr.innerHTML = `
                <td>${index + 1}</td>
                <td>${row.v1}</td>
                <td>${row.v2}</td>
                <td>${row.m}</td>
                <td>${row.fg}</td>
                <td>${row.fa}</td>
                <td class="${style}">${resText}</td>
            `;
            tbody.appendChild(tr);
        });
    }

    function clearTable() {
        historyData = [];
        renderTable();
    }

    // Запуск приложения
    init();

</script>
</body>
</html>